{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lightbox.js"],"names":["Lightbox","$","NAME","JQUERY_NO_CONFLICT","fn","__default","doc","document","lang","i18","ru","close","failLoad","undefinedType","tpl","title","preloader","leftArrow","rightArrow","opts","maxWidth","maxHeight","arrows","infinite","type","hideClose","deepPreload","onShow","onShown","onHide","onHidden","onNavigate","direction","onContentLoaded","Default","$target","config","extend","$arrows","galleryIndex","galleryName","remindLastWidth","remindLastHeight","modalId","Math","floor","random","header","footer","body","append","$element","jQuery","data","$modal","$dialog","$container","$body","$content","_border","_calculateBorders","_padding","_calculatePadding","$items","find","index","on","_hotkeys","bind","isSingle","_arrows","addClass","isTouchDevice","_arrowEvents","_modalEvents","toggleLoading","open","call","off","window","remove","modal","_resize","stringKey","replace","toLowerCase","str","toUpperCase","message","subMessage","getLangString","console","error","_containerToUse","html","length","string","match","url","location","protocol","RegExp","host","prefixes","split","mq","query","matchMedia","matches","DocumentTouch","join","$toUse","remote","attr","detectRemoteType","indexOf","_preloadImage","_preloadNearImages","showYoutubeVideo","showVimeoVideo","getVimeoId","showInstagramVideo","getInstagramId","showHtml5Media","loadRemoteContent","show","css","removeClass","get","_navigateUpdate","navigateTo","event","keyCode","navigateRight","navigateLeft","hasClass","preventDefault","removeAttr","$first","children","$last","$current","setTimeout","empty","src","$containerForImage","img","Image","loadingTimeout","onload","clearTimeout","image","width","height","onerror","deep","depth","nextItem","prevItem","attribute","parseInt","top","_totalCssByAttribute","right","bottom","left","imageAspecRatio","gutterHorizontal","gutterVertical","discountMargin","clientWidth","margins","parseFloat","headerHeight","footerHeight","min","ceil","handleUpdate","isImage","getYoutubeId","isMedia","response","ajax","async","contentType","getResponseHeader","$containerForElement","getRemoteContentType","mediaType","size","getElementSize","preload","autoplay","controls","toggleArrows","wrapClass","$iFrame","frameborder","allowfullscreen","id","substr","showVideoIframe","disableExternalCheck","isExternal","load","proxy","trigger","each","$this","_jQueryInterface","Constructor","noConflict"],"mappings":"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","file":"lightbox.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lightbox.js\");\n","const Lightbox = (($) => {\r\n\r\n    const NAME = 'lightbox'\r\n    const JQUERY_NO_CONFLICT = $.fn[NAME]\r\n\r\n    const __default = {\r\n        doc: document,\r\n\r\n        lang: 'ru',\r\n        i18: {\r\n            ru: {\r\n                close : 'Закрыть',\r\n                failLoad: 'Не удалось загрузить контент.',\r\n                undefinedType: 'Не удалось определить тип контента',\r\n            }\r\n        },\r\n\r\n        tpl: {\r\n            title: 'Тестовый заголовок',\r\n            preloader: '<div class=\"preloader\"></div>',\r\n            leftArrow: '<button type=\"button\"><span>&#10094;</span></button>',\r\n            rightArrow: '<button type=\"button\"><span>&#10095;</span></button>',\r\n            close: '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"{{close}}\"><span aria-hidden=\"true\">&times;</span></button>',\r\n        },\r\n\r\n        opts: {\r\n            maxWidth: 9999,\r\n            maxHeight: 9999,\r\n            arrows: true,\r\n            infinite: false,\r\n            type: null,\r\n            hideClose: true,\r\n            deepPreload: 1,\r\n        },\r\n\r\n        onShow: () => {},\r\n        onShown: () => {},\r\n        onHide: () => {},\r\n        onHidden: () => {},\r\n        onNavigate: ( direction ) => {},\r\n        onContentLoaded: () => {}\r\n    }\r\n\r\n    class Lightbox\r\n    {\r\n        static get Default() {\r\n            return Default;\r\n        }\r\n\r\n        constructor($target, config) {\r\n            this.config = $.extend({}, __default, config);\r\n            this.$arrows = null;\r\n            this.galleryIndex = 0;\r\n            this.galleryName = null;\r\n            // this._titleIsShown = false;\r\n            // this._footerIsShown = false;\r\n            this.remindLastWidth = 0;\r\n            this.remindLastHeight = 0;\r\n\r\n            this.modalId = 'modal-' + Math.floor((Math.random() * 1000) + 1); // this.config.id ||\r\n\r\n            this.header = this.config.tpl.close || '<div class=\"modal-header\"><h5 class=\"mb-0\">' + this.config.tpl.title + '</h5>' + this.config.tpl.close + '</div>';\r\n            this.footer = ' ' || '<div class=\"modal-footer\"></div>';\r\n\r\n            this.tpl =\r\n                '<div class=\"modal lightbox fade\" id=\"'+ this.modalId +'\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">'\r\n              + '   <div class=\"modal-dialog\" role=\"document\">' // modal-dialog-centered\r\n              + '       <div class=\"modal-content\">'\r\n              + '           ' + this.header\r\n              + '           <div class=\"modal-body\">'\r\n              + '               <div class=\"modal-container\">'\r\n              + '                   <div class=\"modal-item fade in show\"></div>'\r\n              + '                   <div class=\"modal-item fade\"></div>'\r\n              + '               </div>'\r\n              + '           </div>'\r\n              + '           ' + this.footer\r\n              + '       </div><!-- .modal-content -->'\r\n              + '   </div>'\r\n              + '</div>';\r\n\r\n            // append modal to document\r\n            $(this.config.doc.body).append( this.tpl );\r\n            // this target element\r\n            this.$element = $target instanceof jQuery ? $target : $($target);\r\n            // modal group ID\r\n            this.galleryName = this.$element.data('gallery');\r\n            // this modal element\r\n            this.$modal = $('#' + this.modalId, this.config.doc);\r\n            // animated block\r\n            this.$dialog = $('.modal-dialog', this.$modal);\r\n            // container closest modal\r\n            this.$container = $('.modal-container', this.$modal);\r\n            // container closest modal\r\n            this.$body = $('.modal-body', this.$modal);\r\n            this.$content = $('.modal-content', this.$modal);\r\n\r\n            this._border = this._calculateBorders(); // call after append and element defined\r\n            this._padding = this._calculatePadding(); // call after append and element defined\r\n\r\n            // check any nodes with this gallery name\r\n            if (this.galleryName) {\r\n                // get all gallery trigger items\r\n                this.$items = $(document.body).find('[data-gallery=\"' + this.galleryName + '\"]');\r\n                // this element current position\r\n                this.galleryIndex = this.$items.index(this.$element);\r\n                // set hotkeys on lightbox\r\n                $(document).on('keydown.bs.lightbox', this._hotkeys.bind(this))\r\n                // add the directional arrows to the modal\r\n                if (this.config.opts.arrows && !this.isSingle()) {\r\n                    // insert (if)required arrows\r\n                    this._arrows();\r\n                }\r\n            }\r\n\r\n            this.$modal.addClass(this.isTouchDevice() ? 'touch' : 'no-touch');\r\n\r\n            this._arrowEvents();\r\n            this._modalEvents();\r\n            // this._touchEvents();\r\n        }\r\n\r\n        _modalEvents() {\r\n            /**\r\n             * Set the events\r\n             * and call bootstrap modal\r\n             */\r\n            this.$modal\r\n                // call onShow on modal open\r\n                .on('show.bs.modal', this.config.onShow.bind(this))\r\n                // call onShown after modal opened\r\n                .on('shown.bs.modal', () => {\r\n                    this.toggleLoading(true);\r\n                    this.open();\r\n                    return this.config.onShown.call(this);\r\n                })\r\n                // call onHide on modal close\r\n                .on('hide.bs.modal', this.config.onHide.bind(this))\r\n                // Call onHidden after modal closed\r\n                .on('hidden.bs.modal', () => {\r\n                    if (this.galleryName) {\r\n                        $(document).off('keydown.bs.lightbox')\r\n                        $(window).off('resize.bs.lightbox')\r\n                    }\r\n                    // jQuery element delete\r\n                    this.$modal.remove();\r\n                    return this.config.onHidden.call(this);\r\n                })\r\n                .modal(this.config);\r\n\r\n            $(window).on('resize.bs.lightbox', () => {\r\n                this._resize(this.remindLastWidth, this.remindLastHeight)\r\n            });\r\n        }\r\n\r\n        getLangString(stringKey) {\r\n            if( this.config.i18[ this.config.lang ][ stringKey ] ) {\r\n                return this.config.i18[ this.config.lang ][ stringKey ];\r\n            }\r\n\r\n            return stringKey\r\n                // insert a space before all caps\r\n                .replace(/([A-Z])/g, ' $1')\r\n                .toLowerCase()\r\n                // uppercase the first character\r\n                .replace(/^./, function(str) { return str.toUpperCase(); })\r\n        }\r\n\r\n        error(message, subMessage) {\r\n            message = getLangString(message);\r\n\r\n            if( subMessage ) {\r\n                message+= ': ' + subMessage;\r\n            }\r\n\r\n            console.error(message);\r\n            this._containerToUse().html(message);\r\n            this._resize(500, 180);\r\n            return this;\r\n        }\r\n\r\n        isSingle() {\r\n            return !this.$items || this.$items.length === 1;\r\n        }\r\n\r\n        isImage(string) {\r\n            return string && string.match(/(^data:image\\/.*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\\?|#).*)?$)/i)\r\n        }\r\n\r\n        isMedia(string) {\r\n            return string && string.match(/(\\.(mp3|mp4|ogg|webm|wav)((\\?|#).*)?$)/i)\r\n        }\r\n\r\n        isExternal(url) {\r\n            let match = url.match(/^([^:\\/?#]+:)?(?:\\/\\/([^\\/?#]*))?([^?#]+)?(\\?[^#]*)?(#.*)?/);\r\n            if (typeof match[1] === \"string\" && match[1].length > 0 && match[1].toLowerCase() !== location.protocol)\r\n                return true;\r\n\r\n            if (typeof match[2] === \"string\" && match[2].length > 0 && match[2].replace(new RegExp(`:(${{\r\n                    \"http:\": 80,\r\n                    \"https:\": 443\r\n                }[location.protocol]})?$`), \"\") !== location.host)\r\n                return true;\r\n\r\n            return false;\r\n        }\r\n\r\n        // @todo\r\n        isSelector() {\r\n        }\r\n\r\n        /****************************** Guestures *****************************/\r\n        isTouchDevice() {\r\n            var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\r\n            var mq = function(query) {\r\n                return window.matchMedia(query).matches;\r\n            }\r\n\r\n            if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\r\n                return true;\r\n            }\r\n\r\n            // include the 'heartz' as a way to have a non matching MQ to help terminate the join\r\n            // https://git.io/vznFH\r\n            var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\r\n            return mq(query);\r\n        }\r\n\r\n        // _touchEvents() {\r\n        //     let isTouch = this.isTouchDevice();\r\n\r\n        //     this.touch = {\r\n        //         data: {},\r\n        //         start: {},\r\n        //         stop: {},\r\n        //         event: {\r\n        //             scroll: \"touchmove scroll\",\r\n        //             start: isTouch ? \"touchstart\" : \"mousedown\",\r\n        //             stop:  isTouch ? \"touchend\" : \"mouseup\",\r\n        //             move:  isTouch ? \"touchmove\" : \"mousemove\",\r\n        //         }\r\n        //     }\r\n\r\n        //     var self = this;\r\n        //     var isVertical = false;\r\n        //     var isHorizontal = false;\r\n\r\n        //     /**\r\n        //      * Guestures events\r\n        //      */\r\n        //     this.$dialog\r\n        //         .on(this.touch.event.start, (event) => {\r\n        //             // event data\r\n        //             this.touch.data = event.originalEvent.touches ?\r\n        //                 event.originalEvent.touches[ 0 ] :\r\n        //                 event;\r\n        //             // start data\r\n        //             this.touch.start = [ this.touch.data.pageX, this.touch.data.pageY ];\r\n        //             // origin: $(event.target)\r\n        //         })\r\n        //         // move object in touch\r\n        //         .on(this.touch.event.move, (event) => {\r\n        //             if (!this.touch.start) return;\r\n        //             // update data\r\n        //             this.touch.data = event.originalEvent.touches ? event.originalEvent.touches[ 0 ] : event;\r\n        //             this.touch.stop = [ this.touch.data.pageX, this.touch.data.pageY ];\r\n        //             // prevent scrolling\r\n        //             // @TODO check this clicable elements (as a or button)\r\n        //             event.preventDefault();\r\n\r\n        //             if (Math.abs(this.touch.start[0] - this.touch.stop[0]) > 10) {\r\n        //                 if( this.$arrows ) {\r\n        //                     $('button', this.$arrows)\r\n        //                         .addClass('disabled')\r\n        //                         .attr('disabled', 'disabled');\r\n        //                 }\r\n\r\n        //                 if( !this.isSingle() ) {\r\n        //                     this.$container\r\n        //                         .addClass('touched')\r\n        //                         .addClass('touched-horizontal');\r\n\r\n\r\n        //                     return this.horizontalMove();\r\n        //                 }\r\n        //                 else {\r\n        //                     // _touchStop(event);\r\n        //                 }\r\n        //             }\r\n\r\n        //             if(Math.abs(this.touch.start[1] - this.touch.stop[1]) > 10) {\r\n        //                 if( this.$arrows ) {\r\n        //                     $('button', this.$arrows)\r\n        //                         .addClass('disabled')\r\n        //                         .attr('disabled', 'disabled');\r\n        //                 }\r\n\r\n        //                 this.$container\r\n        //                     .addClass('touched')\r\n        //                     .addClass('touched-vertical');\r\n\r\n        //                 return this.verticalMove();\r\n        //             }\r\n        //         })\r\n\r\n        //     // call stop on touch end\\mouse up\r\n        //     $(document).on(this.touch.event.stop, this.$dialog, (event) => {\r\n        //         // reset move event\r\n        //         // this.$dialog.unbind(this.touch.event.move, this._touch);\r\n        //         // data exists\r\n        //         if (this.touch.start[0] !== undefined && this.touch.stop[0] !== undefined) {\r\n        //             if( isHorizontal ) {\r\n        //                 horizontalMoveEnd();\r\n        //             }\r\n\r\n        //             // is vertical move stop\r\n        //             if( isVertical ) {\r\n        //                 verticalMoveEnd();\r\n        //             }\r\n        //             else {\r\n        //                 this.$dialog.css('transform', 'translate(0, 0)');\r\n        //             }\r\n        //         }\r\n\r\n        //         var $container = this.$container;\r\n\r\n        //         // disable after click event (for arrows disabled)\r\n        //         setTimeout(function() {\r\n        //             $container\r\n        //                 .removeClass('touched')\r\n        //                 .removeClass('touched-vertical')\r\n        //                 .removeClass('touched-horizontal');\r\n        //         }, 100);\r\n\r\n        //         self.touch.start = [];\r\n        //         self.touch.stop = [];\r\n        //         // isVertical = false;\r\n        //         // isHorizontal = false;\r\n        //         self._navigateUpdate();\r\n        //     });\r\n        //     // $(document).on('mouseleave', this.$dialog, this._touchStop);\r\n        // }\r\n\r\n        // verticalMove() {\r\n        //     // if( !!isHorizontal ) return;\r\n        //     // isVertical = true;\r\n\r\n        //     this.$dialog.css({\r\n        //         'transform': 'translateY(' + -(this.touch.start[1] - this.touch.data.pageY) + 'px)',\r\n        //         'transition': 'none'\r\n        //     });\r\n        // }\r\n\r\n        // verticalMoveEnd() {\r\n        //     if ( Math.abs(this.touch.start[1] - this.touch.stop[1]) > 30 ) {\r\n        //         this.$dialog.css('transition', '');\r\n        //         this.$modal.modal('hide');\r\n        //     }\r\n        //     else {\r\n        //         this.$dialog.css('transform', 'translate(0, 0)');\r\n        //     }\r\n        // }\r\n\r\n        // horizontalMove() {\r\n        //     // if( !!isVertical ) return;\r\n        //     // isHorizontal = true;\r\n\r\n        //     this.$dialog.css({\r\n        //         'transform': 'translateX(' + -(this.touch.start[0] - this.touch.data.pageX) + 'px)',\r\n        //         'transition': 'none'\r\n        //     });\r\n        // }\r\n\r\n        // horizontalMoveEnd() {\r\n        //     if ( Math.abs(this.touch.start[0] - this.touch.stop[0]) > 30 ) {\r\n        //         if( this.touch.start[0] > this.touch.stop[0] ) {\r\n        //             this.navigateRight();\r\n        //         }\r\n        //         else {\r\n        //             this.navigateLeft();\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        open() {\r\n            let $toUse = this._containerToUse()\r\n            // this._updateTitleAndFooter()\r\n\r\n            let remote = this.$element.attr('data-remote') || this.$element.attr('href');\r\n            let type = this.detectRemoteType(remote, this.$element.attr('data-type') || false)\r\n\r\n            if(['image', 'youtube', 'vimeo', 'instagram', 'media', 'url'].indexOf(type) < 0)\r\n                return this.error( 'undefinedType' )\r\n\r\n            switch(type) {\r\n                case 'image':\r\n                    this._preloadImage(remote, $toUse)\r\n                    this._preloadNearImages(this.galleryIndex, this.config.opts.deepPreload)\r\n                    break;\r\n\r\n                case 'youtube':\r\n                    this.showYoutubeVideo(remote, $toUse);\r\n                    break;\r\n\r\n                case 'vimeo':\r\n                    this.showVimeoVideo(this.getVimeoId(remote), $toUse);\r\n                    break;\r\n\r\n                case 'instagram':\r\n                    this.showInstagramVideo(this.getInstagramId(remote), $toUse);\r\n                    break;\r\n\r\n                case 'media':\r\n                    this.showHtml5Media(remote, $toUse);\r\n                    break;\r\n\r\n                default: // url\r\n                    this.loadRemoteContent(remote, $toUse);\r\n                    break;\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        close() {\r\n            return this.$modal.modal('hide');\r\n        }\r\n\r\n        /****************************** Controlls *****************************/\r\n        toggleLoading(show) {\r\n            if(!!show) {\r\n                this.$dialog.css('display', 'none');\r\n                this.$modal.removeClass('in show');\r\n                $('.modal-backdrop').append(this.config.tpl.preloader);\r\n            }\r\n            else {\r\n                this.$dialog.css('display', 'block');\r\n                this.$modal.addClass('in show');\r\n                $('.modal-backdrop').find('.preloader').remove();\r\n            }\r\n            return this;\r\n        }\r\n\r\n        navigateTo(index) {\r\n            if(this.isSingle()) return;\r\n            // outer offset\r\n            if (index < 0 || index > this.$items.length - 1) return;\r\n            // change current index\r\n            this.galleryIndex = index;\r\n            // chenge active element\r\n            this.$element = $(this.$items.get(this.galleryIndex));\r\n\r\n            this._navigateUpdate()\r\n            return this.open();\r\n        }\r\n\r\n        navigateLeft() {\r\n            // not has many items\r\n            if( !this.$items || this.$items.length === 1 ) return;\r\n\r\n            // rewind index\r\n            if (this.galleryIndex === 0) {\r\n                if (this.config.opts.infinite) this.galleryIndex = this.$items.length - 1;\r\n                else return;\r\n            }\r\n            else {\r\n                this.galleryIndex--;\r\n            }\r\n\r\n            // call event\r\n            this.config.onNavigate.call(this, 'left', this.galleryIndex)\r\n            return this.navigateTo(this.galleryIndex)\r\n        }\r\n\r\n        navigateRight() {\r\n            // not has many items\r\n            if( !this.$items || this.$items.length === 1 ) return;\r\n\r\n            if (this.galleryIndex === this.$items.length - 1) {\r\n                if (this.config.opts.infinite) this.galleryIndex = 0;\r\n                else return;\r\n            }\r\n            else {\r\n                this.galleryIndex++;\r\n            }\r\n\r\n            this.config.onNavigate.call(this, 'right', this.galleryIndex)\r\n            return this.navigateTo(this.galleryIndex)\r\n        }\r\n\r\n        _hotkeys(event) {\r\n            event = event || window.event;\r\n            if (event.keyCode === 39 || event.keyCode === 32)\r\n                return this.navigateRight();\r\n            if (event.keyCode === 37 || event.keyCode === 8)\r\n                return this.navigateLeft();\r\n            if (event.keyCode === 27)\r\n                return this.close();\r\n        }\r\n\r\n        _arrows() {\r\n            this.$container.append('<div class=\"navigations\">'\r\n                + this.config.tpl.leftArrow\r\n                + this.config.tpl.rightArrow\r\n                + '</div>');\r\n\r\n            this.$arrows = $('.navigations', this.$container);\r\n        }\r\n\r\n        _arrowEvents() {\r\n            if( !this.$arrows ) return;\r\n\r\n            this.$arrows.on('click', 'button:first-child', event => {\r\n                if( !this.$container.hasClass('touched') ) {\r\n                    event.preventDefault();\r\n                    return this.navigateLeft();\r\n                }\r\n            });\r\n\r\n            this.$arrows.on('click', 'button:last-child', event => {\r\n                if( !this.$container.hasClass('touched') ) {\r\n                    event.preventDefault();\r\n                    return this.navigateRight();\r\n                }\r\n            });\r\n\r\n            this._navigateUpdate();\r\n        }\r\n\r\n        _navigateUpdate() {\r\n            if (!this.config.opts.infinite && this.$arrows) {\r\n                if (this.galleryIndex === 0) {\r\n                    $('button:first-child', this.$arrows)\r\n                        .addClass('disabled')\r\n                        .attr('disabled', 'disabled');\r\n                }\r\n                else {\r\n                    $('button:first-child', this.$arrows)\r\n                        .removeClass('disabled')\r\n                        .removeAttr('disabled');\r\n                }\r\n\r\n                if (this.galleryIndex === this.$items.length - 1) {\r\n                    $('button:last-child', this.$arrows)\r\n                        .addClass('disabled')\r\n                        .attr('disabled', 'disabled');\r\n                }\r\n                else {\r\n                    $('button:last-child', this.$arrows)\r\n                        .removeClass('disabled')\r\n                        .removeAttr('disabled');\r\n                }\r\n            }\r\n        }\r\n\r\n        toggleArrows(show) {\r\n            if( this.$arrows ) {\r\n                if(!!show) return this.$arrows.css('display', '');\r\n                else return this.$arrows.css('display', 'none');\r\n            }\r\n        }\r\n\r\n        /**************************** Layout tools ****************************/\r\n        // serve container\r\n        _containerToUse() {\r\n            let $first = this.$container.children('.modal-item:first');\r\n            let $last = this.$container.children('.modal-item:last');\r\n\r\n            // if currently showing an image, fade it out and remove\r\n            let $toUse = $last;\r\n            let $current = $first;\r\n\r\n            if($toUse.hasClass('in')) {\r\n                $toUse = $first;\r\n                $current = $last;\r\n            }\r\n\r\n            $current.removeClass('in show');\r\n            setTimeout(() => {\r\n                if(!$last.hasClass('in')) $last.empty()\r\n                if(!$first.hasClass('in')) $first.empty()\r\n            }, 500);\r\n\r\n            $toUse.addClass('in show');\r\n            return $toUse;\r\n        }\r\n        // load in container\r\n        _preloadImage(src, $containerForImage) {\r\n            $containerForImage = $containerForImage || false\r\n\r\n            let img = new Image();\r\n            if ($containerForImage) {\r\n                // if loading takes > 200ms show a loader\r\n                let loadingTimeout = setTimeout(() => {\r\n                    $containerForImage.append(this.config.tpl.preloader)\r\n                }, 200)\r\n\r\n                img.onload = () => {\r\n                    if(loadingTimeout) clearTimeout(loadingTimeout)\r\n\r\n                    let image = $('<img />', {\r\n                        src: img.src,\r\n                        class: 'img-fluid'\r\n                    });\r\n\r\n                    $containerForImage.html(image);\r\n                    if( this.$arrows ) {\r\n                        this.$arrows.css('display', '') // remove display to default to css property\r\n                    }\r\n\r\n                    this._resize(img.width, img.height);\r\n                    this.toggleLoading(false);\r\n                    return this.config.onContentLoaded.call(this);\r\n                };\r\n\r\n                img.onerror = () => {\r\n                    this.toggleLoading(false);\r\n                    return this.error('failLoad', + src);\r\n                };\r\n            }\r\n\r\n            img.src = src;\r\n            return img;\r\n        }\r\n        // preload near images\r\n        // @todo repair this\r\n        _preloadNearImages(index, deep, depth = 1) {\r\n            if(this.isSingle()) return;\r\n\r\n            let nextItem = $(this.$items.get(index + depth), false);\r\n            if('undefined' != typeof nextItem) {\r\n                let src = nextItem.attr('data-remote') || nextItem.attr('href');\r\n                // if ('image' === nextItem.attr('data-type') || this.isImage(src));\r\n                // this._preloadImage(src, false);\r\n            }\r\n\r\n            let prevItem = $(this.$items.get(index - depth), false);\r\n            if('undefined' != typeof prevItem) {\r\n                let src = prevItem.attr('data-remote') || prevItem.attr('href');\r\n                // if ('image' === prevItem.attr('data-type') || this.isImage(src));\r\n                // this._preloadImage(src, false);\r\n            }\r\n\r\n            if(deep > 1) {\r\n                return this._preloadNearImages(index, --deep, ++depth);\r\n            }\r\n        }\r\n\r\n        _totalCssByAttribute(attribute) {\r\n            return parseInt(this.$dialog.css(attribute), 10) +\r\n                parseInt(this.$content.css(attribute), 10) +\r\n                parseInt(this.$body.css(attribute), 10)\r\n        }\r\n\r\n        _calculateBorders() {\r\n            return {\r\n                top: this._totalCssByAttribute('border-top-width'),\r\n                right: this._totalCssByAttribute('border-right-width'),\r\n                bottom: this._totalCssByAttribute('border-bottom-width'),\r\n                left: this._totalCssByAttribute('border-left-width'),\r\n            }\r\n        }\r\n\r\n        _calculatePadding() {\r\n            return {\r\n                top: this._totalCssByAttribute('padding-top'),\r\n                right: this._totalCssByAttribute('padding-right'),\r\n                bottom: this._totalCssByAttribute('padding-bottom'),\r\n                left: this._totalCssByAttribute('padding-left'),\r\n            }\r\n        }\r\n\r\n        _resize(width, height) {\r\n\r\n            if( \"object\" == typeof width ) {\r\n                height = width.height;\r\n                width = width.width;\r\n            }\r\n\r\n            height = height || width\r\n            this.remindLastWidth = width\r\n            this.remindLastHeight = height\r\n\r\n            let imageAspecRatio = width / height;\r\n\r\n            // if width > the available space, scale down the expected width and height\r\n            let gutterHorizontal = this._padding.left + this._padding.right + this._border.left + this._border.right\r\n            let gutterVertical = this._padding.top + this._padding.bottom + this._border.bottom + this._border.top\r\n\r\n            // force 10px margin if window size > 575px\r\n            let discountMargin = this.config.doc.body.clientWidth > 575 ? 0 : 20\r\n\r\n            //calculated each time as resizing the window can cause them to change due to Bootstraps fluid margins\r\n            let margins = parseFloat(this.$dialog.css('margin-top')) + parseFloat(this.$dialog.css('margin-bottom'));\r\n\r\n            let headerHeight = 0,\r\n                footerHeight = 0\r\n\r\n            // as the resize is performed the modal is show, the calculate might fail\r\n            // if so, default to the default sizes\r\n            // if (this._footerIsShown)\r\n            // footerHeight = this._$modalFooter.outerHeight(true) || 55\r\n\r\n            // if (this._titleIsShown)\r\n            // headerHeight = this._$modalHeader.outerHeight(true) || 67\r\n\r\n            let maxWidth = Math.min(width + gutterHorizontal,\r\n                this.config.doc.body.clientWidth,\r\n                this.config.opts.maxWidth\r\n            );\r\n\r\n            if((width + gutterHorizontal) > maxWidth) {\r\n                height = (maxWidth - gutterHorizontal - discountMargin) / imageAspecRatio;\r\n                width = maxWidth\r\n            }\r\n            else {\r\n                width = (width + gutterHorizontal)\r\n            }\r\n\r\n            let maxHeight = Math.min(height,\r\n                $(window).height() - gutterVertical - margins - headerHeight - footerHeight,\r\n                this.config.opts.maxHeight - gutterVertical - headerHeight - footerHeight\r\n            );\r\n\r\n            if(height > maxHeight) {\r\n                // if height > the available height, scale down the width\r\n                width = Math.ceil(maxHeight * imageAspecRatio) + gutterHorizontal;\r\n            }\r\n\r\n            this.$container.css('height', maxHeight)\r\n            this.$dialog.css('flex', 1).css('max-width', width);\r\n\r\n            let modal = this.$modal.data('bs.modal');\r\n            if (modal) modal.handleUpdate();\r\n\r\n            return this;\r\n        }\r\n\r\n        getElementSize() {\r\n            let width = this.$element.data('width') || 560;\r\n\r\n            return {\r\n                width: width,\r\n                height: this.$element.data('height') || width / 100 * 56.25\r\n            }\r\n        }\r\n\r\n        /************************** Type check tools **************************/\r\n        detectRemoteType(src, type) {\r\n            type = type || false;\r\n\r\n            if(!type && this.isImage(src)) type = 'image';\r\n            if(!type && this.getYoutubeId(src)) type = 'youtube';\r\n            if(!type && this.getVimeoId(src)) type = 'vimeo';\r\n            if(!type && this.getInstagramId(src)) type = 'instagram';\r\n            if(type == 'audio' || type == 'video' || (!type && this.isMedia(src))) type = 'media';\r\n            if(!type || ['image', 'youtube', 'vimeo', 'instagram', 'media', 'url'].indexOf(type) < 0)\r\n                type = 'url';\r\n\r\n            return type;\r\n        }\r\n\r\n        getRemoteContentType(src) {\r\n            let response = $.ajax({\r\n                type: 'HEAD',\r\n                url: src,\r\n                async: false\r\n            });\r\n            let contentType = response.getResponseHeader('Content-Type')\r\n            return contentType;\r\n        }\r\n\r\n        // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\r\n        showHtml5Media(url, $containerForElement) {\r\n            let contentType = this.getRemoteContentType(url);\r\n            if(!contentType) return this.error( this.getLangString('undefinedType') )\r\n\r\n            let mediaType = contentType.indexOf('audio') > 0 ? 'audio' : 'video',\r\n                size = this.getElementSize();\r\n\r\n            $containerForElement.html( $('<div class=\"embed-responsive embed-responsive-16by9\"></div>').append(\r\n                $('<' + mediaType + '>', {\r\n                    class: 'embed-responsive-item',\r\n                    // width: size.width,\r\n                    // height: size.height,\r\n                    preload: 'auto',\r\n                    autoplay: 1,\r\n                    controls: 1\r\n                })\r\n                .append('<source src=\"' + url + '\" type=\"' + contentType + '\">')\r\n                .append( this.getLangString('undefinedType') )\r\n            ) );\r\n\r\n            this._resize(size.width, size.height);\r\n            this.config.onContentLoaded.call(this);\r\n            // hide the arrows when showing video\r\n            this.toggleArrows(false);\r\n            this.toggleLoading(false);\r\n            return this;\r\n        }\r\n\r\n        // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\r\n        showVideoIframe(url, $containerForElement, size, wrapClass = 'embed-responsive embed-responsive-16by9') {\r\n            if( !size ) size = this.getElementSize();\r\n\r\n            let $iFrame = $('<iframe>', {\r\n                src: url,\r\n                class: 'embed-responsive-item',\r\n                width: size.width,\r\n                height: size.height,\r\n                frameborder: 0,\r\n                allowfullscreen: 1,\r\n            });\r\n\r\n            if( !!wrapClass ) {\r\n                $containerForElement.html(\r\n                    $('<div class=\"' + wrapClass + '\"></div>')\r\n                        .append( $iFrame )\r\n                );\r\n            }\r\n            else {\r\n                $containerForElement.html( $iFrame );\r\n            }\r\n\r\n            this._resize(size.width, size.height);\r\n            this.config.onContentLoaded.call(this);\r\n            // hide the arrows when showing video\r\n            this.toggleArrows(false);\r\n            this.toggleLoading(false);\r\n            return this;\r\n        }\r\n\r\n        getYoutubeId(string) {\r\n            if(!string)\r\n                return false;\r\n            let matches = string.match(/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/)\r\n            return (matches && matches[2].length === 11) ? matches[2] : false\r\n        }\r\n\r\n        showYoutubeVideo(remote, $containerForElement) {\r\n            let id = this.getYoutubeId(remote)\r\n            let query = remote.indexOf('&') > 0 ? remote.substr(remote.indexOf('&')) : ''\r\n\r\n            return this.showVideoIframe(\r\n                `//www.youtube.com/embed/${id}?badge=0&autoplay=1&html5=1${query}`,\r\n                $containerForElement\r\n            );\r\n        }\r\n\r\n        getVimeoId(string) {\r\n            return string && string.indexOf('vimeo') > 0 ? string : false\r\n        }\r\n\r\n        showVimeoVideo(id, $containerForElement) {\r\n            return this.showVideoIframe(id + '?autoplay=1', $containerForElement)\r\n        }\r\n\r\n        getInstagramId(string) {\r\n            return string && string.indexOf('instagram') > 0 ? string : false\r\n        }\r\n\r\n        showInstagramVideo(id, $containerForElement) {\r\n            // instagram load their content into iframe's so this can be put straight into the element\r\n            let width = this.$element.data('width') || 612\r\n            let height = width + 80;\r\n            id = id.substr(-1) !== '/' ? id + '/' : id; // ensure id has trailing slash\r\n\r\n            return this.showVideoIframe(\r\n                id + 'embed/',\r\n                $containerForElement,\r\n                {width: width, height: height},\r\n                null\r\n            );\r\n        }\r\n\r\n        loadRemoteContent(url, $containerForElement) {\r\n            let disableExternalCheck = this.$element.data('disableExternalCheck') || false;\r\n            this.toggleLoading(false);\r\n\r\n            // external urls are loading into an iframe\r\n            // local ajax can be loaded into the container itself\r\n            if (!disableExternalCheck && !this.isExternal(url)) {\r\n                $containerForElement.load(url, $.proxy(() => {\r\n                    return this.$element.trigger('loaded.bs.modal');\r\n                }));\r\n\r\n            } else {\r\n                $containerForElement.html(`<iframe src=\"${url}\" frameborder=\"0\" allowfullscreen></iframe>`);\r\n                this.config.onContentLoaded.call(this);\r\n            }\r\n\r\n            // hide the arrows when remote content\r\n            this.toggleArrows(false);\r\n            this._resize( this.getElementSize() );\r\n            return this;\r\n        }\r\n\r\n        static _jQueryInterface(config) {\r\n            config = config || {}\r\n            return this.each(() => {\r\n                let $this = $(this)\r\n                let config = $.extend({}, Lightbox.__default, $this.data(), typeof config === 'object' && config )\r\n\r\n                new Lightbox(this, config)\r\n            })\r\n        }\r\n    }\r\n\r\n    $.fn[NAME]             = Lightbox._jQueryInterface;\r\n    $.fn[NAME].Constructor = Lightbox;\r\n    $.fn[NAME].noConflict  = () => {\r\n        $.fn[NAME] = JQUERY_NO_CONFLICT;\r\n        return Lightbox._jQueryInterface;\r\n    }\r\n\r\n    return Lightbox\r\n\r\n})(jQuery)\r\n\r\nexport default Lightbox\r\n"],"sourceRoot":""}