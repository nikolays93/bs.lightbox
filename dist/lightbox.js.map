{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lightbox.js"],"names":["Lightbox","$","NAME","JQUERY_NO_CONFLICT","fn","__default","doc","document","lang","i18","ru","prev","next","close","failLoad","undefinedType","tpl","title","preloader","leftArrow","rightArrow","opts","maxWidth","maxHeight","arrows","infinite","type","hideClose","deepPreload","onShow","onShown","onHide","onHidden","onNavigate","direction","onContentLoaded","Default","$target","config","extend","$arrows","galleryIndex","galleryName","remindLastWidth","remindLastHeight","modalId","Math","floor","random","header","footer","translate","body","append","$element","jQuery","data","$modal","$dialog","$container","$body","$content","_border","_calculateBorders","_padding","_calculatePadding","$items","find","index","on","_hotkeys","bind","isSingle","_arrows","addClass","isTouchDevice","_arrowEvents","_modalEvents","toggleLoading","open","call","off","window","remove","modal","_resize","stringKey","langArr","replace","toLowerCase","str","toUpperCase","match","n1","getLangString","message","subMessage","console","error","_containerToUse","html","length","string","url","location","protocol","RegExp","host","prefixes","split","mq","query","matchMedia","matches","DocumentTouch","join","$toUse","remote","attr","detectRemoteType","indexOf","_preloadImage","_preloadNearImages","showYoutubeVideo","showVimeoVideo","getVimeoId","showInstagramVideo","getInstagramId","showHtml5Media","loadRemoteContent","show","css","removeClass","get","_navigateUpdate","navigateTo","event","key","keyCode","which","navigateRight","navigateLeft","hasClass","preventDefault","removeAttr","$first","children","$last","$current","setTimeout","empty","src","$containerForImage","img","Image","loadingTimeout","onload","clearTimeout","image","width","height","onerror","deep","depth","nextItem","prevItem","attribute","parseInt","top","_totalCssByAttribute","right","bottom","left","imageAspecRatio","gutterHorizontal","gutterVertical","discountMargin","clientWidth","margins","parseFloat","headerHeight","footerHeight","min","ceil","handleUpdate","isImage","getYoutubeId","isMedia","response","ajax","async","contentType","getResponseHeader","$containerForElement","getRemoteContentType","mediaType","size","getElementSize","preload","autoplay","controls","toggleArrows","wrapClass","$iFrame","frameborder","allowfullscreen","id","substr","showVideoIframe","disableExternalCheck","isExternal","load","proxy","trigger","each","$this","_jQueryInterface","Constructor","noConflict"],"mappings":"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","file":"lightbox.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lightbox.js\");\n","const Lightbox = (($) => {\n\n    const NAME = 'lightbox'\n    const JQUERY_NO_CONFLICT = $.fn[NAME]\n\n    const __default = {\n        doc: document,\n\n        lang: 'ru',\n        i18: {\n            ru: {\n                prev: 'Назад',\n                next: 'Вперед',\n                close : 'Закрыть',\n                failLoad: 'Не удалось загрузить контент.',\n                undefinedType: 'Не удалось определить тип контента',\n            }\n        },\n\n        tpl: {\n            title: 'Тестовый заголовок',\n            preloader: '<div class=\"preloader\"></div>',\n            leftArrow: '<button type=\"button\" title=\"{{prev}}\"><span>&#10094;</span></button>',\n            rightArrow: '<button type=\"button\" title=\"{{next}}\"><span>&#10095;</span></button>',\n            close: '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"{{close}}\"><span aria-hidden=\"true\">&times;</span></button>',\n        },\n\n        opts: {\n            maxWidth: 9999,\n            maxHeight: 9999,\n            arrows: true,\n            infinite: false,\n            type: null,\n            hideClose: true,\n            deepPreload: 1,\n        },\n\n        onShow: () => {},\n        onShown: () => {},\n        onHide: () => {},\n        onHidden: () => {},\n        onNavigate: ( direction ) => {},\n        onContentLoaded: () => {}\n    }\n\n    class Lightbox\n    {\n        static get Default() {\n            return Default;\n        }\n\n        constructor($target, config) {\n            this.config = $.extend({}, __default, config);\n            this.$arrows = null;\n            this.galleryIndex = 0;\n            this.galleryName = null;\n            // this._titleIsShown = false;\n            // this._footerIsShown = false;\n            this.remindLastWidth = 0;\n            this.remindLastHeight = 0;\n\n            this.modalId = 'modal-' + Math.floor((Math.random() * 1000) + 1); // this.config.id ||\n\n            this.header = this.config.tpl.close; // || '<div class=\"modal-header\"><h5 class=\"mb-0\">' + this.config.tpl.title + '</h5>' + this.config.tpl.close + '</div>';\n            this.footer = ' ' || '<div class=\"modal-footer\"></div>';\n\n            this.tpl =\n                '<div class=\"modal lightbox fade\" id=\"'+ this.modalId +'\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">'\n              + '   <div class=\"modal-dialog\" role=\"document\">' // modal-dialog-centered\n              + '       <div class=\"modal-content\">'\n              + '           ' + this.translate( this.header )\n              + '           <div class=\"modal-body\">'\n              + '               <div class=\"modal-container\">'\n              + '                   <div class=\"modal-item fade in show\"></div>'\n              + '                   <div class=\"modal-item fade\"></div>'\n              + '               </div>'\n              + '           </div>'\n              + '           ' + this.translate( this.footer )\n              + '       </div><!-- .modal-content -->'\n              + '   </div>'\n              + '</div>';\n\n            // append modal to document\n            $(this.config.doc.body).append( this.tpl );\n            // this target element\n            this.$element = $target instanceof jQuery ? $target : $($target);\n            // modal group ID\n            this.galleryName = this.$element.data('gallery');\n            // this modal element\n            this.$modal = $('#' + this.modalId, this.config.doc);\n            // animated block\n            this.$dialog = $('.modal-dialog', this.$modal);\n            // container closest modal\n            this.$container = $('.modal-container', this.$modal);\n            // container closest modal\n            this.$body = $('.modal-body', this.$modal);\n            this.$content = $('.modal-content', this.$modal);\n\n            this._border = this._calculateBorders(); // call after append and element defined\n            this._padding = this._calculatePadding(); // call after append and element defined\n\n            // check any nodes with this gallery name\n            if (this.galleryName) {\n                // get all gallery trigger items\n                this.$items = $(document.body).find('[data-gallery=\"' + this.galleryName + '\"]');\n                // this element current position\n                this.galleryIndex = this.$items.index(this.$element);\n                // set hotkeys on lightbox\n                $(document).on('keydown.bs.lightbox', this._hotkeys.bind(this))\n                // add the directional arrows to the modal\n                if (this.config.opts.arrows && !this.isSingle()) {\n                    // insert (if)required arrows\n                    this._arrows();\n                }\n            }\n\n            this.$modal.addClass(this.isTouchDevice() ? 'touch' : 'no-touch');\n\n            this._arrowEvents();\n            this._modalEvents();\n            // this._touchEvents();\n        }\n\n        _modalEvents() {\n            /**\n             * Set the events\n             * and call bootstrap modal\n             */\n            this.$modal\n                // call onShow on modal open\n                .on('show.bs.modal', this.config.onShow.bind(this))\n                // call onShown after modal opened\n                .on('shown.bs.modal', () => {\n                    this.toggleLoading(true);\n                    this.open();\n                    return this.config.onShown.call(this);\n                })\n                // call onHide on modal close\n                .on('hide.bs.modal', this.config.onHide.bind(this))\n                // Call onHidden after modal closed\n                .on('hidden.bs.modal', () => {\n                    if (this.galleryName) {\n                        $(document).off('keydown.bs.lightbox')\n                        $(window).off('resize.bs.lightbox')\n                    }\n                    // jQuery element delete\n                    this.$modal.remove();\n                    return this.config.onHidden.call(this);\n                })\n                .modal(this.config);\n\n            $(window).on('resize.bs.lightbox', () => {\n                this._resize(this.remindLastWidth, this.remindLastHeight)\n            });\n        }\n\n        getLangString(stringKey) {\n            let langArr = this.config.i18[ this.config.lang ] || this.config.i18.ru;\n\n            if( langArr[ stringKey ] ) {\n                return langArr[ stringKey ];\n            }\n\n            return stringKey\n                // insert a space before all caps\n                .replace(/([A-Z])/g, ' $1')\n                .toLowerCase()\n                // uppercase the first character\n                .replace(/^./, function(str) { return str.toUpperCase(); })\n        }\n\n        translate(str) {\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, (match, n1) => {\n                return this.getLangString(n1);\n            });\n        }\n\n        error(message, subMessage) {\n            message = getLangString(message);\n\n            if( subMessage ) {\n                message+= ': ' + subMessage;\n            }\n\n            console.error(message);\n            this._containerToUse().html(message);\n            this._resize(500, 180);\n            return this;\n        }\n\n        isSingle() {\n            return !this.$items || this.$items.length === 1;\n        }\n\n        isImage(string) {\n            return string && string.match(/(^data:image\\/.*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\\?|#).*)?$)/i)\n        }\n\n        isMedia(string) {\n            return string && string.match(/(\\.(mp3|mp4|ogg|webm|wav)((\\?|#).*)?$)/i)\n        }\n\n        isExternal(url) {\n            let match = url.match(/^([^:\\/?#]+:)?(?:\\/\\/([^\\/?#]*))?([^?#]+)?(\\?[^#]*)?(#.*)?/);\n            if (typeof match[1] === \"string\" && match[1].length > 0 && match[1].toLowerCase() !== location.protocol)\n                return true;\n\n            if (typeof match[2] === \"string\" && match[2].length > 0 && match[2].replace(new RegExp(`:(${{\n                    \"http:\": 80,\n                    \"https:\": 443\n                }[location.protocol]})?$`), \"\") !== location.host)\n                return true;\n\n            return false;\n        }\n\n        // @todo\n        isSelector() {\n        }\n\n        /****************************** Guestures *****************************/\n        isTouchDevice() {\n            var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\n            var mq = function(query) {\n                return window.matchMedia(query).matches;\n            }\n\n            if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n                return true;\n            }\n\n            // include the 'heartz' as a way to have a non matching MQ to help terminate the join\n            // https://git.io/vznFH\n            var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\n            return mq(query);\n        }\n\n        // _touchEvents() {\n        //     let isTouch = this.isTouchDevice();\n\n        //     this.touch = {\n        //         data: {},\n        //         start: {},\n        //         stop: {},\n        //         event: {\n        //             scroll: \"touchmove scroll\",\n        //             start: isTouch ? \"touchstart\" : \"mousedown\",\n        //             stop:  isTouch ? \"touchend\" : \"mouseup\",\n        //             move:  isTouch ? \"touchmove\" : \"mousemove\",\n        //         }\n        //     }\n\n        //     var self = this;\n        //     var isVertical = false;\n        //     var isHorizontal = false;\n\n        //     /**\n        //      * Guestures events\n        //      */\n        //     this.$dialog\n        //         .on(this.touch.event.start, (event) => {\n        //             // event data\n        //             this.touch.data = event.originalEvent.touches ?\n        //                 event.originalEvent.touches[ 0 ] :\n        //                 event;\n        //             // start data\n        //             this.touch.start = [ this.touch.data.pageX, this.touch.data.pageY ];\n        //             // origin: $(event.target)\n        //         })\n        //         // move object in touch\n        //         .on(this.touch.event.move, (event) => {\n        //             if (!this.touch.start) return;\n        //             // update data\n        //             this.touch.data = event.originalEvent.touches ? event.originalEvent.touches[ 0 ] : event;\n        //             this.touch.stop = [ this.touch.data.pageX, this.touch.data.pageY ];\n        //             // prevent scrolling\n        //             // @TODO check this clicable elements (as a or button)\n        //             event.preventDefault();\n\n        //             if (Math.abs(this.touch.start[0] - this.touch.stop[0]) > 10) {\n        //                 if( this.$arrows ) {\n        //                     $('button', this.$arrows)\n        //                         .addClass('disabled')\n        //                         .attr('disabled', 'disabled');\n        //                 }\n\n        //                 if( !this.isSingle() ) {\n        //                     this.$container\n        //                         .addClass('touched')\n        //                         .addClass('touched-horizontal');\n\n\n        //                     return this.horizontalMove();\n        //                 }\n        //                 else {\n        //                     // _touchStop(event);\n        //                 }\n        //             }\n\n        //             if(Math.abs(this.touch.start[1] - this.touch.stop[1]) > 10) {\n        //                 if( this.$arrows ) {\n        //                     $('button', this.$arrows)\n        //                         .addClass('disabled')\n        //                         .attr('disabled', 'disabled');\n        //                 }\n\n        //                 this.$container\n        //                     .addClass('touched')\n        //                     .addClass('touched-vertical');\n\n        //                 return this.verticalMove();\n        //             }\n        //         })\n\n        //     // call stop on touch end\\mouse up\n        //     $(document).on(this.touch.event.stop, this.$dialog, (event) => {\n        //         // reset move event\n        //         // this.$dialog.unbind(this.touch.event.move, this._touch);\n        //         // data exists\n        //         if (this.touch.start[0] !== undefined && this.touch.stop[0] !== undefined) {\n        //             if( isHorizontal ) {\n        //                 horizontalMoveEnd();\n        //             }\n\n        //             // is vertical move stop\n        //             if( isVertical ) {\n        //                 verticalMoveEnd();\n        //             }\n        //             else {\n        //                 this.$dialog.css('transform', 'translate(0, 0)');\n        //             }\n        //         }\n\n        //         var $container = this.$container;\n\n        //         // disable after click event (for arrows disabled)\n        //         setTimeout(function() {\n        //             $container\n        //                 .removeClass('touched')\n        //                 .removeClass('touched-vertical')\n        //                 .removeClass('touched-horizontal');\n        //         }, 100);\n\n        //         self.touch.start = [];\n        //         self.touch.stop = [];\n        //         // isVertical = false;\n        //         // isHorizontal = false;\n        //         self._navigateUpdate();\n        //     });\n        //     // $(document).on('mouseleave', this.$dialog, this._touchStop);\n        // }\n\n        // verticalMove() {\n        //     // if( !!isHorizontal ) return;\n        //     // isVertical = true;\n\n        //     this.$dialog.css({\n        //         'transform': 'translateY(' + -(this.touch.start[1] - this.touch.data.pageY) + 'px)',\n        //         'transition': 'none'\n        //     });\n        // }\n\n        // verticalMoveEnd() {\n        //     if ( Math.abs(this.touch.start[1] - this.touch.stop[1]) > 30 ) {\n        //         this.$dialog.css('transition', '');\n        //         this.$modal.modal('hide');\n        //     }\n        //     else {\n        //         this.$dialog.css('transform', 'translate(0, 0)');\n        //     }\n        // }\n\n        // horizontalMove() {\n        //     // if( !!isVertical ) return;\n        //     // isHorizontal = true;\n\n        //     this.$dialog.css({\n        //         'transform': 'translateX(' + -(this.touch.start[0] - this.touch.data.pageX) + 'px)',\n        //         'transition': 'none'\n        //     });\n        // }\n\n        // horizontalMoveEnd() {\n        //     if ( Math.abs(this.touch.start[0] - this.touch.stop[0]) > 30 ) {\n        //         if( this.touch.start[0] > this.touch.stop[0] ) {\n        //             this.navigateRight();\n        //         }\n        //         else {\n        //             this.navigateLeft();\n        //         }\n        //     }\n        // }\n\n        open() {\n            let $toUse = this._containerToUse()\n            // this._updateTitleAndFooter()\n\n            let remote = this.$element.attr('data-remote') || this.$element.attr('href');\n            let type = this.detectRemoteType(remote, this.$element.attr('data-type') || false)\n\n            if(['image', 'youtube', 'vimeo', 'instagram', 'media', 'url'].indexOf(type) < 0)\n                return this.error( 'undefinedType' )\n\n            switch(type) {\n                case 'image':\n                    this._preloadImage(remote, $toUse)\n                    this._preloadNearImages(this.galleryIndex, this.config.opts.deepPreload)\n                    break;\n\n                case 'youtube':\n                    this.showYoutubeVideo(remote, $toUse);\n                    break;\n\n                case 'vimeo':\n                    this.showVimeoVideo(this.getVimeoId(remote), $toUse);\n                    break;\n\n                case 'instagram':\n                    this.showInstagramVideo(this.getInstagramId(remote), $toUse);\n                    break;\n\n                case 'media':\n                    this.showHtml5Media(remote, $toUse);\n                    break;\n\n                default: // url\n                    this.loadRemoteContent(remote, $toUse);\n                    break;\n            }\n\n            return this;\n        }\n\n        close() {\n            return this.$modal.modal('hide');\n        }\n\n        /****************************** Controlls *****************************/\n        toggleLoading(show) {\n            if(!!show) {\n                this.$dialog.css('display', 'none');\n                this.$modal.removeClass('in show');\n                $('.modal-backdrop').append( this.translate(this.config.tpl.preloader) );\n            }\n            else {\n                this.$dialog.css('display', 'block');\n                this.$modal.addClass('in show');\n                $('.modal-backdrop').find('.preloader').remove();\n            }\n            return this;\n        }\n\n        navigateTo(index) {\n            if(this.isSingle()) return;\n            // outer offset\n            if (index < 0 || index > this.$items.length - 1) return;\n            // change current index\n            this.galleryIndex = index;\n            // chenge active element\n            this.$element = $(this.$items.get(this.galleryIndex));\n\n            this._navigateUpdate()\n            return this.open();\n        }\n\n        navigateLeft() {\n            // not has many items\n            if( !this.$items || this.$items.length === 1 ) return;\n\n            // rewind index\n            if (this.galleryIndex === 0) {\n                if (this.config.opts.infinite) this.galleryIndex = this.$items.length - 1;\n                else return;\n            }\n            else {\n                this.galleryIndex--;\n            }\n\n            // call event\n            this.config.onNavigate.call(this, 'left', this.galleryIndex)\n            return this.navigateTo(this.galleryIndex)\n        }\n\n        navigateRight() {\n            // not has many items\n            if( !this.$items || this.$items.length === 1 ) return;\n\n            if (this.galleryIndex === this.$items.length - 1) {\n                if (this.config.opts.infinite) this.galleryIndex = 0;\n                else return;\n            }\n            else {\n                this.galleryIndex++;\n            }\n\n            this.config.onNavigate.call(this, 'right', this.galleryIndex)\n            return this.navigateTo(this.galleryIndex)\n        }\n\n        _hotkeys(event) {\n            event = event || window.event;\n            let key = event.keyCode || event.which;\n            // right arrow or space\n            if (key === 39 || key === 32) {\n                return this.navigateRight();\n            }\n            // left arrow or backspace\n            if (key === 37 || key === 8) {\n                return this.navigateLeft();\n            }\n            // escape\n            if (key === 27) {\n                return this.close();\n            }\n        }\n\n        _arrows() {\n            this.$container.append('<div class=\"navigations\">'\n                + this.translate(this.config.tpl.leftArrow)\n                + this.translate(this.config.tpl.rightArrow)\n                + '</div>');\n\n            this.$arrows = $('.navigations', this.$container);\n        }\n\n        _arrowEvents() {\n            if( !this.$arrows ) return;\n\n            this.$arrows.on('click', 'button:first-child', event => {\n                if( !this.$container.hasClass('touched') ) {\n                    event.preventDefault();\n                    return this.navigateLeft();\n                }\n            });\n\n            this.$arrows.on('click', 'button:last-child', event => {\n                if( !this.$container.hasClass('touched') ) {\n                    event.preventDefault();\n                    return this.navigateRight();\n                }\n            });\n\n            this._navigateUpdate();\n        }\n\n        _navigateUpdate() {\n            if (!this.config.opts.infinite && this.$arrows) {\n                if (this.galleryIndex === 0) {\n                    $('button:first-child', this.$arrows)\n                        .addClass('disabled')\n                        .attr('disabled', 'disabled');\n                }\n                else {\n                    $('button:first-child', this.$arrows)\n                        .removeClass('disabled')\n                        .removeAttr('disabled');\n                }\n\n                if (this.galleryIndex === this.$items.length - 1) {\n                    $('button:last-child', this.$arrows)\n                        .addClass('disabled')\n                        .attr('disabled', 'disabled');\n                }\n                else {\n                    $('button:last-child', this.$arrows)\n                        .removeClass('disabled')\n                        .removeAttr('disabled');\n                }\n            }\n        }\n\n        toggleArrows(show) {\n            if( this.$arrows ) {\n                if(!!show) return this.$arrows.css('display', '');\n                else return this.$arrows.css('display', 'none');\n            }\n        }\n\n        /**************************** Layout tools ****************************/\n        // serve container\n        _containerToUse() {\n            let $first = this.$container.children('.modal-item:first');\n            let $last = this.$container.children('.modal-item:last');\n\n            // if currently showing an image, fade it out and remove\n            let $toUse = $last;\n            let $current = $first;\n\n            if($toUse.hasClass('in')) {\n                $toUse = $first;\n                $current = $last;\n            }\n\n            $current.removeClass('in show');\n            setTimeout(() => {\n                if(!$last.hasClass('in')) $last.empty()\n                if(!$first.hasClass('in')) $first.empty()\n            }, 500);\n\n            $toUse.addClass('in show');\n            return $toUse;\n        }\n        // load in container\n        _preloadImage(src, $containerForImage) {\n            $containerForImage = $containerForImage || false\n\n            let img = new Image();\n            if ($containerForImage) {\n                // if loading takes > 200ms show a loader\n                let loadingTimeout = setTimeout(() => {\n                    $containerForImage.append( this.translate(this.config.tpl.preloader) )\n                }, 200)\n\n                img.onload = () => {\n                    if(loadingTimeout) clearTimeout(loadingTimeout)\n\n                    let image = $('<img />', {\n                        src: img.src,\n                        class: 'img-fluid'\n                    });\n\n                    $containerForImage.html(image);\n                    if( this.$arrows ) {\n                        this.$arrows.css('display', '') // remove display to default to css property\n                    }\n\n                    this._resize(img.width, img.height);\n                    this.toggleLoading(false);\n                    return this.config.onContentLoaded.call(this);\n                };\n\n                img.onerror = () => {\n                    this.toggleLoading(false);\n                    return this.error('failLoad', + src);\n                };\n            }\n\n            img.src = src;\n            return img;\n        }\n        // preload near images\n        // @todo repair this\n        _preloadNearImages(index, deep, depth = 1) {\n            if(this.isSingle()) return;\n\n            let nextItem = $(this.$items.get(index + depth), false);\n            if('undefined' != typeof nextItem) {\n                let src = nextItem.attr('data-remote') || nextItem.attr('href');\n                // if ('image' === nextItem.attr('data-type') || this.isImage(src));\n                // this._preloadImage(src, false);\n            }\n\n            let prevItem = $(this.$items.get(index - depth), false);\n            if('undefined' != typeof prevItem) {\n                let src = prevItem.attr('data-remote') || prevItem.attr('href');\n                // if ('image' === prevItem.attr('data-type') || this.isImage(src));\n                // this._preloadImage(src, false);\n            }\n\n            if(deep > 1) {\n                return this._preloadNearImages(index, --deep, ++depth);\n            }\n        }\n\n        _totalCssByAttribute(attribute) {\n            return parseInt(this.$dialog.css(attribute), 10) +\n                parseInt(this.$content.css(attribute), 10) +\n                parseInt(this.$body.css(attribute), 10)\n        }\n\n        _calculateBorders() {\n            return {\n                top: this._totalCssByAttribute('border-top-width'),\n                right: this._totalCssByAttribute('border-right-width'),\n                bottom: this._totalCssByAttribute('border-bottom-width'),\n                left: this._totalCssByAttribute('border-left-width'),\n            }\n        }\n\n        _calculatePadding() {\n            return {\n                top: this._totalCssByAttribute('padding-top'),\n                right: this._totalCssByAttribute('padding-right'),\n                bottom: this._totalCssByAttribute('padding-bottom'),\n                left: this._totalCssByAttribute('padding-left'),\n            }\n        }\n\n        _resize(width, height) {\n\n            if( \"object\" == typeof width ) {\n                height = width.height;\n                width = width.width;\n            }\n\n            height = height || width\n            this.remindLastWidth = width\n            this.remindLastHeight = height\n\n            let imageAspecRatio = width / height;\n\n            // if width > the available space, scale down the expected width and height\n            let gutterHorizontal = this._padding.left + this._padding.right + this._border.left + this._border.right\n            let gutterVertical = this._padding.top + this._padding.bottom + this._border.bottom + this._border.top\n\n            // force 10px margin if window size > 575px\n            let discountMargin = this.config.doc.body.clientWidth > 575 ? 0 : 20\n\n            //calculated each time as resizing the window can cause them to change due to Bootstraps fluid margins\n            let margins = parseFloat(this.$dialog.css('margin-top')) + parseFloat(this.$dialog.css('margin-bottom'));\n\n            let headerHeight = 0,\n                footerHeight = 0\n\n            // as the resize is performed the modal is show, the calculate might fail\n            // if so, default to the default sizes\n            // if (this._footerIsShown)\n            // footerHeight = this._$modalFooter.outerHeight(true) || 55\n\n            // if (this._titleIsShown)\n            // headerHeight = this._$modalHeader.outerHeight(true) || 67\n\n            let maxWidth = Math.min(width + gutterHorizontal,\n                this.config.doc.body.clientWidth,\n                this.config.opts.maxWidth\n            );\n\n            if((width + gutterHorizontal) > maxWidth) {\n                height = (maxWidth - gutterHorizontal - discountMargin) / imageAspecRatio;\n                width = maxWidth\n            }\n            else {\n                width = (width + gutterHorizontal)\n            }\n\n            let maxHeight = Math.min(height,\n                $(window).height() - gutterVertical - margins - headerHeight - footerHeight,\n                this.config.opts.maxHeight - gutterVertical - headerHeight - footerHeight\n            );\n\n            if(height > maxHeight) {\n                // if height > the available height, scale down the width\n                width = Math.ceil(maxHeight * imageAspecRatio) + gutterHorizontal;\n            }\n\n            this.$container.css('height', maxHeight)\n            this.$dialog.css('flex', 1).css('max-width', width);\n\n            let modal = this.$modal.data('bs.modal');\n            if (modal) modal.handleUpdate();\n\n            return this;\n        }\n\n        getElementSize() {\n            let width = this.$element.data('width') || 560;\n\n            return {\n                width: width,\n                height: this.$element.data('height') || width / 100 * 56.25\n            }\n        }\n\n        /************************** Type check tools **************************/\n        detectRemoteType(src, type) {\n            type = type || false;\n\n            if(!type && this.isImage(src)) type = 'image';\n            if(!type && this.getYoutubeId(src)) type = 'youtube';\n            if(!type && this.getVimeoId(src)) type = 'vimeo';\n            if(!type && this.getInstagramId(src)) type = 'instagram';\n            if(type == 'audio' || type == 'video' || (!type && this.isMedia(src))) type = 'media';\n            if(!type || ['image', 'youtube', 'vimeo', 'instagram', 'media', 'url'].indexOf(type) < 0)\n                type = 'url';\n\n            return type;\n        }\n\n        getRemoteContentType(src) {\n            let response = $.ajax({\n                type: 'HEAD',\n                url: src,\n                async: false\n            });\n            let contentType = response.getResponseHeader('Content-Type')\n            return contentType;\n        }\n\n        // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\n        showHtml5Media(url, $containerForElement) {\n            let contentType = this.getRemoteContentType(url);\n            if(!contentType) return this.error( this.getLangString('undefinedType') )\n\n            let mediaType = contentType.indexOf('audio') > 0 ? 'audio' : 'video',\n                size = this.getElementSize();\n\n            $containerForElement.html( $('<div class=\"embed-responsive embed-responsive-16by9\"></div>').append(\n                $('<' + mediaType + '>', {\n                    class: 'embed-responsive-item',\n                    // width: size.width,\n                    // height: size.height,\n                    preload: 'auto',\n                    autoplay: 1,\n                    controls: 1\n                })\n                .append('<source src=\"' + url + '\" type=\"' + contentType + '\">')\n                .append( this.getLangString('undefinedType') )\n            ) );\n\n            this._resize(size.width, size.height);\n            this.config.onContentLoaded.call(this);\n            // hide the arrows when showing video\n            this.toggleArrows(false);\n            this.toggleLoading(false);\n            return this;\n        }\n\n        // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\n        showVideoIframe(url, $containerForElement, size, wrapClass = 'embed-responsive embed-responsive-16by9') {\n            if( !size ) size = this.getElementSize();\n\n            let $iFrame = $('<iframe>', {\n                src: url,\n                class: 'embed-responsive-item',\n                width: size.width,\n                height: size.height,\n                frameborder: 0,\n                allowfullscreen: 1,\n            });\n\n            if( !!wrapClass ) {\n                $containerForElement.html(\n                    $('<div class=\"' + wrapClass + '\"></div>')\n                        .append( $iFrame )\n                );\n            }\n            else {\n                $containerForElement.html( $iFrame );\n            }\n\n            this._resize(size.width, size.height);\n            this.config.onContentLoaded.call(this);\n            // hide the arrows when showing video\n            this.toggleArrows(false);\n            this.toggleLoading(false);\n            return this;\n        }\n\n        getYoutubeId(string) {\n            if(!string)\n                return false;\n            let matches = string.match(/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/)\n            return (matches && matches[2].length === 11) ? matches[2] : false\n        }\n\n        showYoutubeVideo(remote, $containerForElement) {\n            let id = this.getYoutubeId(remote)\n            let query = remote.indexOf('&') > 0 ? remote.substr(remote.indexOf('&')) : ''\n\n            return this.showVideoIframe(\n                `//www.youtube.com/embed/${id}?badge=0&autoplay=1&html5=1${query}`,\n                $containerForElement\n            );\n        }\n\n        getVimeoId(string) {\n            return string && string.indexOf('vimeo') > 0 ? string : false\n        }\n\n        showVimeoVideo(id, $containerForElement) {\n            return this.showVideoIframe(id + '?autoplay=1', $containerForElement)\n        }\n\n        getInstagramId(string) {\n            return string && string.indexOf('instagram') > 0 ? string : false\n        }\n\n        showInstagramVideo(id, $containerForElement) {\n            // instagram load their content into iframe's so this can be put straight into the element\n            let width = this.$element.data('width') || 612\n            let height = width + 80;\n            id = id.substr(-1) !== '/' ? id + '/' : id; // ensure id has trailing slash\n\n            return this.showVideoIframe(\n                id + 'embed/',\n                $containerForElement,\n                {width: width, height: height},\n                null\n            );\n        }\n\n        loadRemoteContent(url, $containerForElement) {\n            let disableExternalCheck = this.$element.data('disableExternalCheck') || false;\n            this.toggleLoading(false);\n\n            // external urls are loading into an iframe\n            // local ajax can be loaded into the container itself\n            if (!disableExternalCheck && !this.isExternal(url)) {\n                $containerForElement.load(url, $.proxy(() => {\n                    return this.$element.trigger('loaded.bs.modal');\n                }));\n\n            } else {\n                $containerForElement.html(`<iframe src=\"${url}\" frameborder=\"0\" allowfullscreen></iframe>`);\n                this.config.onContentLoaded.call(this);\n            }\n\n            // hide the arrows when remote content\n            this.toggleArrows(false);\n            this._resize( this.getElementSize() );\n            return this;\n        }\n\n        static _jQueryInterface(config) {\n            config = config || {}\n            return this.each(() => {\n                let $this = $(this)\n                let config = $.extend({}, Lightbox.__default, $this.data(), typeof config === 'object' && config )\n\n                new Lightbox(this, config)\n            })\n        }\n    }\n\n    $.fn[NAME]             = Lightbox._jQueryInterface;\n    $.fn[NAME].Constructor = Lightbox;\n    $.fn[NAME].noConflict  = () => {\n        $.fn[NAME] = JQUERY_NO_CONFLICT;\n        return Lightbox._jQueryInterface;\n    }\n\n    return Lightbox\n\n})(jQuery)\n\nexport default Lightbox\n"],"sourceRoot":""}