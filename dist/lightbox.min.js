!function(t){var e={};function i(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}i.r(e);var s=function(t){var e="lightbox",i=t.fn[e],a={doc:document,lang:"ru",i18:{ru:{close:"Закрыть",failLoad:"Не удалось загрузить контент.",undefinedType:"Не удалось определить тип контента"}},tpl:{title:"Тестовый заголовок",preloader:'<div class="preloader"></div>',leftArrow:'<button type="button"><span>&#10094;</span></button>',rightArrow:'<button type="button"><span>&#10095;</span></button>',close:'<button type="button" class="close" data-dismiss="modal" aria-label="{{close}}"><span aria-hidden="true">&times;</span></button>'},opts:{maxWidth:9999,maxHeight:9999,arrows:!0,infinite:!1,type:null,hideClose:!0,deepPreload:1},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(t){},onContentLoaded:function(){}},s=function(){function e(i,o){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t.extend({},a,o),this.$arrows=null,this.galleryIndex=0,this.galleryName=null,this.remindLastWidth=0,this.remindLastHeight=0,this.touch={data:{},start:{},stop:{},support:t.support.touch,event:{}},this.touch.event.scroll="touchmove scroll",this.touch.event.start=this.touch.support?"touchstart":"mousedown",this.touch.event.stop=this.touch.support?"touchend":"mouseup",this.touch.event.move=this.touch.support?"touchmove":"mousemove",this.modalId="modal-"+Math.floor(1e3*Math.random()+1),this.header=this.config.tpl.close||'<div class="modal-header"><h5 class="mb-0">'+this.config.tpl.title+"</h5>"+this.config.tpl.close+"</div>",this.footer=" ",this.tpl='<div class="modal lightbox fade" id="'+this.modalId+'" tabindex="-1" role="dialog" aria-hidden="true">   <div class="modal-dialog" role="document">       <div class="modal-content">           '+this.header+'           <div class="modal-body">               <div class="modal-container">                   <div class="modal-item fade in show"></div>                   <div class="modal-item fade"></div>               </div>           </div>           '+this.footer+"       </div>\x3c!-- .modal-content --\x3e   </div></div>",t(this.config.doc.body).append(this.tpl),this.$element=i instanceof jQuery?i:t(i),this.galleryName=this.$element.data("gallery"),this.$modal=t("#"+this.modalId,this.config.doc),this.$dialog=t(".modal-dialog",this.$modal),this.$container=t(".modal-container",this.$modal),this.$body=t(".modal-body",this.$modal),this.$content=t(".modal-content",this.$modal),this._border=this._calculateBorders(),this._padding=this._calculatePadding(),this.galleryName&&(this.$items=t(document.body).find('[data-gallery="'+this.galleryName+'"]'),this.galleryIndex=this.$items.index(this.$element),t(document).on("keydown.bs.lightbox",this._hotkeys.bind(this)),this.config.opts.arrows&&this.$items.length>1&&(this.$container.append('<div class="navigations">'+this.config.tpl.leftArrow+this.config.tpl.rightArrow+"</div>"),this.$arrows=t(".navigations",this.$container),this.$container.on("click","button:first-child",function(t){if(!n.$container.hasClass("touched"))return t.preventDefault(),n.navigateLeft()}),this.$container.on("click","button:last-child",function(t){if(console.log("click",n.$container.hasClass("touched")),!n.$container.hasClass("touched"))return t.preventDefault(),n.navigateRight()}),this._navigateUpdate())),this.$modal.on("show.bs.modal",this.config.onShow.bind(this)).on("shown.bs.modal",function(){return n.toggleLoading(!0),n.open(),n.config.onShown.call(n)}).on("hide.bs.modal",this.config.onHide.bind(this)).on("hidden.bs.modal",function(){return n.galleryName&&(t(document).off("keydown.bs.lightbox"),t(window).off("resize.bs.lightbox")),n.$modal.remove(),n.config.onHidden.call(n)}).modal(this.config),t(window).on("resize.bs.lightbox",function(){n._resize(n.remindLastWidth,n.remindLastHeight)}),this.$dialog.on(this.touch.event.start,function(e){var i=n;i.touch.data=e.originalEvent.touches?e.originalEvent.touches[0]:e,i.touch.start=[i.touch.data.pageX,i.touch.data.pageY],i.$dialog.bind(i.touch.event.move,s),t(document).one(i.touch.event.stop,i.$dialog,r),t(document).on("mouseleave",i.$dialog,r);var o=!1,a=!1;function s(e){i.touch.start&&(i.touch.data=e.originalEvent.touches?e.originalEvent.touches[0]:e,i.touch.stop=[i.touch.data.pageX,i.touch.data.pageY],e.preventDefault(),Math.abs(i.touch.start[1]-i.touch.stop[1])>10&&(i.$arrows&&t("button",i.$arrows).addClass("disabled").attr("disabled","disabled"),i.$container.addClass("touched").addClass("touched-vertical"),a||(o=!0,i.$dialog.css({transform:"translateY("+-(i.touch.start[1]-i.touch.data.pageY)+"px)",transition:"none"}))),Math.abs(i.touch.start[0]-i.touch.stop[0])>10&&(i.$items.length>1?(i.$arrows&&t("button",i.$arrows).addClass("disabled").attr("disabled","disabled"),i.$container.addClass("touched").addClass("touched-horizontal"),o||(a=!0,i.$dialog.css({transform:"translateX("+-(i.touch.start[0]-i.touch.data.pageX)+"px)",transition:"none"}))):r(e)))}function r(t){i.$dialog.unbind(i.touch.event.move,s),void 0!==i.touch.start[0]&&void 0!==i.touch.stop[0]&&(a&&Math.abs(i.touch.start[0]-i.touch.stop[0])>30&&(i.touch.start[0]>i.touch.stop[0]?i.navigateRight():i.navigateLeft()),o&&Math.abs(i.touch.start[1]-i.touch.stop[1])>30?(i.$dialog.css("transition",""),i.$modal.modal("hide")):i.$dialog.css("transform","translate(0, 0)")),setTimeout(function(){i.$container.removeClass("touched").removeClass("touched-vertical").removeClass("touched-horizontal")},100),i.touch.start=[],i.touch.stop=[],o=!1,a=!1,i._navigateUpdate()}})}return n(e,[{key:"getLangString",value:function(t){return this.config.i18[this.config.lang][t]?this.config.i18[this.config.lang][t]:t.replace(/([A-Z])/g," $1").toLowerCase().replace(/^./,function(t){return t.toUpperCase()})}},{key:"error",value:function(t,e){return t=getLangString(t),e&&(t+=": "+e),console.error(t),this._containerToUse().html(t),this._resize(500,180),this}},{key:"_hotkeys",value:function(t){return 39===(t=t||window.event).keyCode||32===t.keyCode?this.navigateRight():37===t.keyCode||8===t.keyCode?this.navigateLeft():27===t.keyCode?this.close():void 0}}],[{key:"Default",get:function(){return Default}}]),n(e,[{key:"open",value:function(){var t=this._containerToUse(),e=this.$element.attr("data-remote")||this.$element.attr("href"),i=this.detectRemoteType(e,this.$element.attr("data-type")||!1);if(["image","youtube","vimeo","instagram","media","url"].indexOf(i)<0)return this.error("undefinedType");switch(i){case"image":this._preloadImage(e,t),this._preloadNearImages(this.galleryIndex,this.config.opts.deepPreload);break;case"youtube":this.showYoutubeVideo(e,t);break;case"vimeo":this.showVimeoVideo(this.getVimeoId(e),t);break;case"instagram":this.showInstagramVideo(this.getInstagramId(e),t);break;case"media":this.showHtml5Media(e,t);break;default:this.loadRemoteContent(e,t)}return this}},{key:"close",value:function(){return this.$modal.modal("hide")}},{key:"_containerToUse",value:function(){var t=this.$container.children(".modal-item:first"),e=this.$container.children(".modal-item:last"),i=e,o=t;return i.hasClass("in")&&(i=t,o=e),o.removeClass("in show"),setTimeout(function(){e.hasClass("in")||e.empty(),t.hasClass("in")||t.empty()},500),i.addClass("in show"),i}},{key:"_preloadImage",value:function(e,i){var o=this;i=i||!1;var a=new Image;if(i){var n=setTimeout(function(){i.append(o.config.tpl.preloader)},200);a.onload=function(){n&&clearTimeout(n);var e=t("<img />",{src:a.src,class:"img-fluid"});return i.html(e),o.$arrows&&o.$arrows.css("display",""),o._resize(a.width,a.height),o.toggleLoading(!1),o.config.onContentLoaded.call(o)},a.onerror=function(){return o.toggleLoading(!1),o.error("failLoad",+e)}}return a.src=e,a}},{key:"_preloadNearImages",value:function(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.$items){var a=t(this.$items.get(e+o),!1);if(void 0!==a)a.attr("data-remote")||a.attr("href");var n=t(this.$items.get(e-o),!1);if(void 0!==n)n.attr("data-remote")||n.attr("href");return i>1?this._preloadNearImages(e,--i,++o):void 0}}},{key:"navigateTo",value:function(e){if(!(e<0||e>this.$items.length-1))return this.galleryIndex=e,this.$element=t(this.$items.get(this.galleryIndex)),this._navigateUpdate(),this.open()}},{key:"navigateLeft",value:function(){if(this.$items&&1!==this.$items.length){if(0===this.galleryIndex){if(!this.config.opts.infinite)return;this.galleryIndex=this.$items.length-1}else this.galleryIndex--;return this.config.onNavigate.call(this,"left",this.galleryIndex),this.navigateTo(this.galleryIndex)}}},{key:"navigateRight",value:function(){if(this.$items&&1!==this.$items.length){if(this.galleryIndex===this.$items.length-1){if(!this.config.opts.infinite)return;this.galleryIndex=0}else this.galleryIndex++;return this.config.onNavigate.call(this,"right",this.galleryIndex),this.navigateTo(this.galleryIndex)}}},{key:"_navigateUpdate",value:function(){!this.config.opts.infinite&&this.$arrows&&(0===this.galleryIndex?t("button:first-child",this.$arrows).addClass("disabled").attr("disabled","disabled"):t("button:first-child",this.$arrows).removeClass("disabled").removeAttr("disabled"),this.galleryIndex===this.$items.length-1?t("button:last-child",this.$arrows).addClass("disabled").attr("disabled","disabled"):t("button:last-child",this.$arrows).removeClass("disabled").removeAttr("disabled"))}},{key:"toggleArrows",value:function(t){if(this.$arrows)return t?this.$arrows.css("display",""):this.$arrows.css("display","none")}},{key:"toggleLoading",value:function(e){return e?(this.$dialog.css("display","none"),this.$modal.removeClass("in show"),t(".modal-backdrop").append(this.config.tpl.preloader)):(this.$dialog.css("display","block"),this.$modal.addClass("in show"),t(".modal-backdrop").find(".preloader").remove()),this}},{key:"_totalCssByAttribute",value:function(t){return parseInt(this.$dialog.css(t),10)+parseInt(this.$content.css(t),10)+parseInt(this.$body.css(t),10)}},{key:"_calculateBorders",value:function(){return{top:this._totalCssByAttribute("border-top-width"),right:this._totalCssByAttribute("border-right-width"),bottom:this._totalCssByAttribute("border-bottom-width"),left:this._totalCssByAttribute("border-left-width")}}},{key:"_calculatePadding",value:function(){return{top:this._totalCssByAttribute("padding-top"),right:this._totalCssByAttribute("padding-right"),bottom:this._totalCssByAttribute("padding-bottom"),left:this._totalCssByAttribute("padding-left")}}},{key:"_resize",value:function(e,i){"object"==o(e)&&(i=e.height,e=e.width),i=i||e,this.remindLastWidth=e,this.remindLastHeight=i;var a=e/i,n=this._padding.left+this._padding.right+this._border.left+this._border.right,s=this._padding.top+this._padding.bottom+this._border.bottom+this._border.top,r=this.config.doc.body.clientWidth>575?0:20,d=parseFloat(this.$dialog.css("margin-top"))+parseFloat(this.$dialog.css("margin-bottom")),l=Math.min(e+n,this.config.doc.body.clientWidth,this.config.opts.maxWidth);e+n>l?(i=(l-n-r)/a,e=l):e+=n;var h=Math.min(i,t(window).height()-s-d-0-0,this.config.opts.maxHeight-s-0-0);i>h&&(e=Math.ceil(h*a)+n),this.$container.css("height",h),this.$dialog.css("flex",1).css("max-width",e);var u=this.$modal.data("bs.modal");return u&&u.handleUpdate(),this}},{key:"detectRemoteType",value:function(t,e){return!(e=e||!1)&&this.isImage(t)&&(e="image"),!e&&this.getYoutubeId(t)&&(e="youtube"),!e&&this.getVimeoId(t)&&(e="vimeo"),!e&&this.getInstagramId(t)&&(e="instagram"),("audio"==e||"video"==e||!e&&this.isMedia(t))&&(e="media"),(!e||["image","youtube","vimeo","instagram","media","url"].indexOf(e)<0)&&(e="url"),e}},{key:"getRemoteContentType",value:function(e){return t.ajax({type:"HEAD",url:e,async:!1}).getResponseHeader("Content-Type")}},{key:"isImage",value:function(t){return t&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)}},{key:"isMedia",value:function(t){return t&&t.match(/(\.(mp3|mp4|ogg|webm|wav)((\?|#).*)?$)/i)}},{key:"isExternal",value:function(t){var e=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof e[1]&&e[1].length>0&&e[1].toLowerCase()!==location.protocol||"string"==typeof e[2]&&e[2].length>0&&e[2].replace(new RegExp(":(".concat({"http:":80,"https:":443}[location.protocol],")?$")),"")!==location.host}},{key:"isSelector",value:function(){}},{key:"getElementSize",value:function(){var t=this.$element.data("width")||800;return{width:t,height:this.$element.data("height")||t/100*56.25}}},{key:"showHtml5Media",value:function(e,i){var o=this.getRemoteContentType(e);if(!o)return this.error(this.getLangString("undefinedType"));var a=o.indexOf("audio")>0?"audio":"video",n=this.getElementSize();return i.html(t('<div class="embed-responsive embed-responsive-16by9"></div>').append(t("<"+a+">",{class:"embed-responsive-item",width:n.width,height:n.height,preload:"auto",autoplay:1,controls:1}).append('<source src="'+e+'" type="'+o+'">').append(this.getLangString("undefinedType")))),this._resize(n.width,n.height),this.config.onContentLoaded.call(this),this.toggleArrows(!1),this.toggleLoading(!1),this}},{key:"showVideoIframe",value:function(e,i,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"embed-responsive embed-responsive-16by9";o||(o=this.getElementSize());var n=t("<iframe>",{src:e,class:"embed-responsive-item",width:o.width,height:o.height,frameborder:0,allowfullscreen:1});return a?i.html(t('<div class="'+a+'"></div>').append(n)):i.html(n),this._resize(width,height),this.config.onContentLoaded.call(this),this.toggleArrows(!1),this.toggleLoading(!1),this}},{key:"getYoutubeId",value:function(t){if(!t)return!1;var e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return!(!e||11!==e[2].length)&&e[2]}},{key:"showYoutubeVideo",value:function(t,e){var i=this.getYoutubeId(t),o=t.indexOf("&")>0?t.substr(t.indexOf("&")):"";return this.showVideoIframe("//www.youtube.com/embed/".concat(i,"?badge=0&autoplay=1&html5=1").concat(o),e)}},{key:"getVimeoId",value:function(t){return!!(t&&t.indexOf("vimeo")>0)&&t}},{key:"showVimeoVideo",value:function(t,e){return this.showVideoIframe(t+"?autoplay=1",e)}},{key:"getInstagramId",value:function(t){return!!(t&&t.indexOf("instagram")>0)&&t}},{key:"showInstagramVideo",value:function(t,e){var i=this.$element.data("width")||612,o=i+80;return t="/"!==t.substr(-1)?t+"/":t,this.showVideoIframe(t+"embed/",e,{width:i,height:o},null)}},{key:"loadRemoteContent",value:function(e,i){var o=this,a=this.$element.data("disableExternalCheck")||!1;return this.toggleLoading(!1),a||this.isExternal(e)?(i.html('<iframe src="'.concat(e,'" frameborder="0" allowfullscreen></iframe>')),this.config.onContentLoaded.call(this)):i.load(e,t.proxy(function(){return o.$element.trigger("loaded.bs.modal")})),this.toggleArrows(!1),this._resize(this.getElementSize()),this}}],[{key:"_jQueryInterface",value:function(i){var a=this;return i=i||{},this.each(function(){var i=t(a),n=t.extend({},e.__default,i.data(),"object"===o(n)&&n);new e(a,n)})}}]),e}();return t.fn[e]=s._jQueryInterface,t.fn[e].Constructor=s,t.fn[e].noConflict=function(){return t.fn[e]=i,s._jQueryInterface},s}(jQuery);e.default=s}]);