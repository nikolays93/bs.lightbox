!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i.r(e);var s=function(t){var e="lightbox",i=t.fn[e],n={doc:document,lang:"ru",i18:{ru:{close:"Закрыть",failLoad:"Не удалось загрузить контент.",undefinedType:"Не удалось определить тип контента"}},tpl:{title:"Тестовый заголовок",preloader:'<div class="preloader"></div>',leftArrow:'<button type="button"><span>&#10094;</span></button>',rightArrow:'<button type="button"><span>&#10095;</span></button>',close:'<button type="button" class="close" data-dismiss="modal" aria-label="{{close}}"><span aria-hidden="true">&times;</span></button>'},opts:{maxWidth:9999,maxHeight:9999,arrows:!0,infinite:!1,type:null,hideClose:!0,deepPreload:1},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(t){},onContentLoaded:function(){}},s=function(){function e(i,o){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t.extend({},n,o),this.$arrows=null,this.galleryIndex=0,this.galleryName=null,this.remindLastWidth=0,this.remindLastHeight=0,this.modalId="modal-"+Math.floor(1e3*Math.random()+1),this.header=this.config.tpl.close||'<div class="modal-header"><h5 class="mb-0">'+this.config.tpl.title+"</h5>"+this.config.tpl.close+"</div>",this.footer=" ",this.tpl='<div class="modal lightbox fade" id="'+this.modalId+'" tabindex="-1" role="dialog" aria-hidden="true">   <div class="modal-dialog" role="document">       <div class="modal-content">           '+this.header+'           <div class="modal-body">               <div class="modal-container">                   <div class="modal-item fade in show"></div>                   <div class="modal-item fade"></div>               </div>           </div>           '+this.footer+"       </div>\x3c!-- .modal-content --\x3e   </div></div>",t(this.config.doc.body).append(this.tpl),this.$element=i instanceof jQuery?i:t(i),this.galleryName=this.$element.data("gallery"),this.$modal=t("#"+this.modalId,this.config.doc),this.$dialog=t(".modal-dialog",this.$modal),this.$container=t(".modal-container",this.$modal),this.$body=t(".modal-body",this.$modal),this.$content=t(".modal-content",this.$modal),this._border=this._calculateBorders(),this._padding=this._calculatePadding(),this.galleryName&&(this.$items=t(document.body).find('[data-gallery="'+this.galleryName+'"]'),this.galleryIndex=this.$items.index(this.$element),t(document).on("keydown.bs.lightbox",this.hotkeys.bind(this)),this.config.opts.arrows&&this.$items.length>1&&(this.$container.append('<div class="navigations">'+this.config.tpl.leftArrow+this.config.tpl.rightArrow+"</div>"),this.$arrows=t(".navigations",this.$container),this.$container.on("click","button:first-child",function(t){return t.preventDefault(),a.navigateLeft()}),this.$container.on("click","button:last-child",function(t){return t.preventDefault(),a.navigateRight()}),this.navigateUpdate())),this.$modal.on("show.bs.modal",this.config.onShow.bind(this)).on("shown.bs.modal",function(){return a.togglePreloader(!0),a._handle(),a.config.onShown.call(a)}).on("hide.bs.modal",this.config.onHide.bind(this)).on("hidden.bs.modal",function(){return a.galleryName&&(t(document).off("keydown.bs.lightbox"),t(window).off("resize.bs.lightbox")),a.$modal.remove(),a.config.onHidden.call(a)}).modal(this.config),t(window).on("resize.bs.lightbox",function(){a._resize(a.remindLastWidth,a.remindLastHeight)}),this.touch={data:{},start:{},stop:{},support:t.support.touch,event:{}},this.touch.event.scroll="touchmove scroll",this.touch.event.start=this.touch.support?"touchstart":"mousedown",this.touch.event.stop=this.touch.support?"touchend":"mouseup",this.touch.event.move=this.touch.support?"touchmove":"mousemove";var s=this.touch;this.$dialog.on(s.event.start,function(e){var i=a;function o(e){s.start&&(s.data=e.originalEvent.touches?e.originalEvent.touches[0]:e,s.stop=[s.data.pageX,s.data.pageY],Math.abs(s.start[1]-s.stop[1])>10&&(e.preventDefault(),t("button",i.$arrows).addClass("disabled").attr("disabled","disabled")),i.$dialog.css({transform:"translateY("+-(s.start[1]-s.data.pageY)+"px)",transition:"none"}))}function n(t){i.$dialog.unbind(s.event.move,o),s.start&&s.stop&&(Math.abs(s.start[1]-s.stop[1])>30?(i.$dialog.css("transition",""),i.$modal.modal("hide"),i.$container.off("click"),s.start=[],s.stop=[]):i.$dialog.css("transform","translateY(0px)")),i.navigateUpdate()}s.data=e.originalEvent.touches?e.originalEvent.touches[0]:e,s.start=[s.data.pageX,s.data.pageY],i.$dialog.bind(s.event.move,o),t(document).one(s.event.stop,i.$dialog,n),t(document).on("mouseleave",i.$dialog,n)})}return a(e,null,[{key:"Default",get:function(){return Default}}]),a(e,[{key:"_handle",value:function(){var t=this._containerToUse(),e=this.$element.attr("data-remote")||this.$element.attr("href");return["image","youtube","vimeo","instagram","media","url"].indexOf("image")<0?this._error(this.config.i18.ru.undefinedType):(this._preloadImage(e,t),this._preloadNearImages(this.galleryIndex,this.config.opts.deepPreload),this)}},{key:"_containerToUse",value:function(){var t=this.$container.children(".modal-item:first"),e=this.$container.children(".modal-item:last"),i=e,o=t;return i.hasClass("in")&&(i=t,o=e),o.removeClass("in show"),setTimeout(function(){e.hasClass("in")||e.empty(),t.hasClass("in")||t.empty()},500),i.addClass("in show"),i}},{key:"_preloadImage",value:function(e,i){var o=this;i=i||!1;var n=new Image;if(i){var a=setTimeout(function(){i.append(o.config.tpl.preloader)},200);n.onload=function(){a&&clearTimeout(a);var e=t("<img />");return e.attr("src",n.src),i.html(e),o.$arrows.css("display",""),o._resize(n.width,n.height),o.togglePreloader(!1),o.config.onContentLoaded.call(o)},n.onerror=function(){return o.togglePreloader(!1),o.error(o.config.i18.ru.failLoad+":"+e)}}return n.src=e,n}},{key:"_preloadNearImages",value:function(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.$items){var n=t(this.$items.get(e+o),!1);if(void 0!==n)n.attr("data-remote")||n.attr("href");var a=t(this.$items.get(e-o),!1);if(void 0!==a)a.attr("data-remote")||a.attr("href");return i>1?this._preloadNearImages(e,--i,++o):void 0}}},{key:"hotkeys",value:function(t){return 39===(t=t||window.event).keyCode||32===t.keyCode?this.navigateRight():37===t.keyCode||8===t.keyCode?this.navigateLeft():27===t.keyCode?this.close():void 0}},{key:"close",value:function(){return this.$modal.modal("hide")}},{key:"navigateTo",value:function(e){e<0||e>this.$items.length-1||(this.galleryIndex=e,this.$element=t(this.$items.get(this.galleryIndex)),this.navigateUpdate(),this._handle())}},{key:"navigateLeft",value:function(){if(this.$items&&1!==this.$items.length){if(0===this.galleryIndex){if(!this.config.opts.infinite)return;this.galleryIndex=this.$items.length-1}else this.galleryIndex--;return this.config.onNavigate.call(this,"left",this.galleryIndex),this.navigateTo(this.galleryIndex)}}},{key:"navigateRight",value:function(){if(this.$items&&1!==this.$items.length){if(this.galleryIndex===this.$items.length-1){if(!this.config.opts.infinite)return;this.galleryIndex=0}else this.galleryIndex++;return this.config.onNavigate.call(this,"right",this.galleryIndex),this.navigateTo(this.galleryIndex)}}},{key:"navigateUpdate",value:function(){this.config.opts.infinite||(0===this.galleryIndex?t("button:first-child",this.$arrows).addClass("disabled").attr("disabled","disabled"):t("button:first-child",this.$arrows).removeClass("disabled").removeAttr("disabled"),this.galleryIndex===this.$items.length-1?t("button:last-child",this.$arrows).addClass("disabled").attr("disabled","disabled"):t("button:last-child",this.$arrows).removeClass("disabled").removeAttr("disabled"))}},{key:"togglePreloader",value:function(e){return(e=!!e)?(this.$dialog.css("display","none"),this.$modal.removeClass("in show"),t(".modal-backdrop").append(this.config.tpl.preloader)):(this.$dialog.css("display","block"),this.$modal.addClass("in show"),t(".modal-backdrop").find(".preloader").remove()),this}},{key:"_totalCssByAttribute",value:function(t){return parseInt(this.$dialog.css(t),10)+parseInt(this.$content.css(t),10)+parseInt(this.$body.css(t),10)}},{key:"_calculateBorders",value:function(){return{top:this._totalCssByAttribute("border-top-width"),right:this._totalCssByAttribute("border-right-width"),bottom:this._totalCssByAttribute("border-bottom-width"),left:this._totalCssByAttribute("border-left-width")}}},{key:"_calculatePadding",value:function(){return{top:this._totalCssByAttribute("padding-top"),right:this._totalCssByAttribute("padding-right"),bottom:this._totalCssByAttribute("padding-bottom"),left:this._totalCssByAttribute("padding-left")}}},{key:"_resize",value:function(e,i){i=i||e,this.remindLastWidth=e,this.remindLastHeight=i;var o=e/i,n=this._padding.left+this._padding.right+this._border.left+this._border.right,a=this._padding.top+this._padding.bottom+this._border.bottom+this._border.top,s=this.config.doc.body.clientWidth>575?0:20,r=parseFloat(this.$dialog.css("margin-top"))+parseFloat(this.$dialog.css("margin-bottom")),l=Math.min(e+n,this.config.doc.body.clientWidth,this.config.opts.maxWidth);e+n>l?(i=(l-n-s)/o,e=l):e+=n;var d=Math.min(i,t(window).height()-a-r-0-0,this.config.opts.maxHeight-a-0-0);i>d&&(e=Math.ceil(d*o)+n),this.$container.css("height",d),this.$dialog.css("flex",1).css("max-width",e);var h=this.$modal.data("bs.modal");return h&&h.handleUpdate(),this}},{key:"_error",value:function(t){return console.error(t),this.containerToUse().html(t),this.resize(500,180),this}}],[{key:"_jQueryInterface",value:function(i){var n=this;return i=i||{},this.each(function(){var a=t(n),s=t.extend({},e.__default,a.data(),"object"===o(i)&&i);new e(n,s)})}}]),e}();return t.fn[e]=s._jQueryInterface,t.fn[e].Constructor=s,t.fn[e].noConflict=function(){return t.fn[e]=i,s._jQueryInterface},s}(jQuery);e.default=s}]);